var WPmap={mapContainer:document.getElementById("map-container"),dirContainer:document.getElementById("dir-container"),toInput:document.getElementById("map-config-address"),fromInput:document.getElementById("from-input"),unitInput:document.getElementById("unit-input"),geoDirections:document.getElementById("geo-directions"),nativeLinkElem:document.getElementById("native-link"),startLatLng:null,destination:null,geoLocation:null,geoLat:null,geoLon:null,dirService:new google.maps.DirectionsService,dirRenderer:new google.maps.DirectionsRenderer,map:null,getGeo:function(){return navigator.geolocation?navigator.geolocation:undefined},getGeoCoords:function(){WPmap.geoLoc.getCurrentPosition(WPmap.setGeoCoords,WPmap.geoError)},setGeoCoords:function(e){WPmap.geoLat=e.coords.latitude;WPmap.geoLon=e.coords.longitude;WPmap.showGeoButton();WPmap.setNativeMapLink()},geoError:function(e){var t="";switch(e.code){case e.PERMISSION_DENIED:t="Não conseguimos autorização do seu navegador para usara geolocalização.";break;case e.POSITION_UNAVAILABLE:t="Desculpe, não conseguimos determinar sua posição exata.";break;case e.PERMISSION_DENIED_TIMEOUT:t="Desculpe, estamos com problemas para determinar sua localização. Por favor, tente novamente."}if(t==""){var n=e.code.toString();t="Sua posição não pode ser determinada devido a umerro desconhecido (Codigo: "+n+")."}console.log(t)},showGeoButton:function(){var e=document.getElementById("geo-directions");e.removeClass("hidden")},setNativeMapLink:function(){var e=WPmap.geoLat+","+WPmap.geoLon,t=WPmap.toInput.value,n=t.replace(" ","");WPmap.nativeLinkElem.innerHTML='<a  class="semfade" target="_blank" href="http://maps.google.com/maps?mrsp=0&amp;daddr='+n+"&amp;saddr="+e+'" class="map-button">Abrir no Google Maps</a>'},getDestination:function(){var e=WPmap.toInput.value,t=/^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/.test(e);if(t){var n=WPmap.toInput.value.split(",");WPmap.destination=new google.maps.LatLng(n[0],n[1]);WPmap.setupMap()}else{geocoder=new google.maps.Geocoder;geocoder.geocode({address:WPmap.toInput.value},function(e,t){WPmap.destination=e[0].geometry.location;WPmap.setupMap()})}},setupMap:function(){var e=[-16.739291,-49.295899],t=new google.maps.LatLng(e[0],e[1]),n=WPmap.mapContainer.getAttribute("data-map-icon"),r=WPmap.mapContainer.getAttribute("data-map-title"),i=WPmap.mapContainer.getAttribute("data-map-infowindow"),s='<span class="infoWindow"><img class="icon" src="'+n+'"/> <h1>'+r+"</h1><p>"+i+"</p></span>",o=WPmap.mapContainer.getAttribute("data-map-zoom");WPmap.map=new google.maps.Map(WPmap.mapContainer,{zoom:parseInt(o),center:t,mapTypeId:google.maps.MapTypeId.ROADMAP});marker=new google.maps.Marker({map:WPmap.map,position:WPmap.destination,draggable:!1});infoWindow=new google.maps.InfoWindow({content:s});infoWindow.open(WPmap.map,marker)},getSelectedUnitSystem:function(){return WPmap.unitInput.options[WPmap.unitInput.selectedIndex].value=="metric"?google.maps.DirectionsUnitSystem.METRIC:google.maps.DirectionsUnitSystem.IMPERIAL},getDirections:function(e){var t=WPmap.fromInput.value,n={origin:t,destination:WPmap.destination,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:WPmap.getSelectedUnitSystem()};if(e=="geo"){var r=new google.maps.LatLng(WPmap.geoLat,WPmap.geoLon);n.origin=r}WPmap.dirService.route(n,WPmap.showDirections)},showDirections:function(e,t){if(t!=google.maps.DirectionsStatus.OK){switch(t){case"ZERO_RESULTS":alert("Desculpe, não conseguimos traçar uma rota para esse endereço. Tente novamente.");break;case"NOT_FOUND":alert("Não encontramos esse endereço. Tente novamente.");break;default:alert("Desculpe, existe algum erro comprometendo as rotas. Tente novamente.")}return}WPmap.dirRenderer.setMap(WPmap.map);WPmap.dirRenderer.setPanel(WPmap.dirContainer);WPmap.dirRenderer.setDirections(e)},init:function(){(WPmap.geoLoc=WPmap.getGeo())&&WPmap.getGeoCoords();WPmap.getDestination();google.maps.event.addListener(WPmap.dirRenderer,"directions_changed",function(){infoWindow.close();marker.setVisible(!1);var e=WPmap.dirRenderer.directions.routes[0].legs[0].distance.text;infoWindow.setContent('<span class="infowindow">Obrigado!<br /> Você está apenas <strong> '+e+"</strong> de nós!. <br />A rota esta traçada no mapa. Te esperamos aqui!</span>");infoWindow.open(WPmap.map,marker);setTimeout(function(){infoWindow.close()},8e3)})}};google.maps.event.addDomListener(window,"load",WPmap.init);HTMLElement.prototype.removeClass=function(e){var t="",n,r=this.className.split(" ");for(n=0;n<r.length;n++)r[n]!==e&&(t+=r[n]+" ");this.className=t};